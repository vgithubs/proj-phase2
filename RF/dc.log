######################################################################
#
# EE-577b 2020 FALL
# : DesignCompiler synthesis script
#   modified by Linyi Hong
#
# use this script as a template for synthesizing combinational logic
#
######################################################################
# Setting variable for design_name. (top module name)
set design_name $env(DESIGN_NAME);
reg_file
## For NCSUFreePDK45nm library
set search_path [ list .                   /home/scf-22/ee577/NCSU45PDK/FreePDK45/osu_soc/lib/files ]
. /home/scf-22/ee577/NCSU45PDK/FreePDK45/osu_soc/lib/files
set target_library { gscl45nm.db }
 gscl45nm.db 
set synthetic_library [list dw_foundation.sldb standard.sldb ]
dw_foundation.sldb standard.sldb
set link_library [list * gscl45nm.db dw_foundation.sldb standard.sldb]
* gscl45nm.db dw_foundation.sldb standard.sldb
# Reading source verilog file.
# copy your verilog file into ./src/ before synthesis.
read_verilog ./src/${design_name}.v ;
Loading db file '/home/scf-22/ee577/NCSU45PDK/FreePDK45/osu_soc/lib/files/gscl45nm.db'
Loading db file '/usr/local/synopsys/Design_Compiler/default/libraries/syn/dw_foundation.sldb'
Loading db file '/usr/local/synopsys/Design_Compiler/default/libraries/syn/standard.sldb'
Loading db file '/usr/local/synopsys/Design_Compiler/default/libraries/syn/gtech.db'
  Loading link library 'gscl45nm'
  Loading link library 'gtech'
Loading verilog file '/home/viterbi/08/rushikes/ee577b/project/proj-phase2/RF/src/reg_file.v'
Detecting input file type automatically (-rtl or -netlist).
Reading with Presto HDL Compiler (equivalent to -rtl option).
Running PRESTO HDLC
Compiling source file /home/viterbi/08/rushikes/ee577b/project/proj-phase2/RF/src/reg_file.v

Statistics for case statements in always block at line 21 in file
        '/home/viterbi/08/rushikes/ee577b/project/proj-phase2/RF/src/reg_file.v'
===============================================
|           Line           |  full/ parallel  |
===============================================
|            30            |    auto/auto     |
===============================================

Statistics for case statements in always block at line 52 in file
        '/home/viterbi/08/rushikes/ee577b/project/proj-phase2/RF/src/reg_file.v'
===============================================
|           Line           |  full/ parallel  |
===============================================
|            59            |    auto/auto     |
|            96            |    auto/auto     |
===============================================

Inferred memory devices in process
        in routine reg_file line 21 in file
                '/home/viterbi/08/rushikes/ee577b/project/proj-phase2/RF/src/reg_file.v'.
===============================================================================
|    Register Name    |   Type    | Width | Bus | MB | AR | AS | SR | SS | ST |
===============================================================================
|    data_arr_reg     | Flip-flop | 2048  |  Y  | N  | N  | N  | N  | N  | N  |
===============================================================================

Inferred memory devices in process
        in routine reg_file line 52 in file
                '/home/viterbi/08/rushikes/ee577b/project/proj-phase2/RF/src/reg_file.v'.
===========================================================================
|    Register Name    | Type  | Width | Bus | MB | AR | AS | SR | SS | ST |
===========================================================================
|     data_r2_reg     | Latch |  64   |  Y  | N  | N  | N  | -  | -  | -  |
===========================================================================
Statistics for MUX_OPs
======================================================
| block name/line  | Inputs | Outputs | # sel inputs |
======================================================
|   reg_file/63    |   32   |   64    |      5       |
|   reg_file/93    |   32   |   64    |      5       |
|   reg_file/130   |   32   |   64    |      5       |
======================================================
Presto compilation completed successfully.
Current design is now '/home/viterbi/08/rushikes/ee577b/project/proj-phase2/RF/src/reg_file.db:reg_file'
Loaded 1 design.
Current design is 'reg_file'.
reg_file
# Setting $design_name as current working design.
# Use this command before setting any constraints.
current_design $design_name ;
Current design is 'reg_file'.
{reg_file}
# If you have multiple instances of the same module,
# use this so that DesignCompiler optimizes each instance separately.
uniquify ;
1
# Linking your design into the cells in standard cell libraries.
# This command checks whether your design can be compiled
link ;

  Linking design 'reg_file'
  Using the following designs and libraries:
  --------------------------------------------------------------------------
  reg_file                    /home/viterbi/08/rushikes/ee577b/project/proj-phase2/RF/src/reg_file.db
  gscl45nm (library)          /home/scf-22/ee577/NCSU45PDK/FreePDK45/osu_soc/lib/files/gscl45nm.db
  dw_foundation.sldb (library) /usr/local/synopsys/Design_Compiler/default/libraries/syn/dw_foundation.sldb

1
# Create a clock with period of 5.
create_clock -name clk -period 5.0 -waveform [list 0 2.5] [get_ports clk]
1
# Setting timing constraints for combinational logic.
# Specifying maximum delay from inputs to outputs
set_max_delay 5.0 -to [all_outputs];
1
set_max_delay 5.0 -from [all_inputs];
1
# "check_design" checks the internal representation of the
# current design for consistency and issues error and
# warning messages as appropriate.
check_design > report/$design_name.check_design ;
# Perforing synthesis and optimization on the current_design.
compile ;
Information: Checking out the license 'DesignWare'. (SEC-104)
Information: Evaluating DesignWare library utilization. (UISN-27)

============================================================================
| DesignWare Building Block Library  |         Version         | Available |
============================================================================
| Basic DW Building Blocks           | K-2015.06-DWBB_201506.5.2
                                                               |     *     |
| Licensed DW Building Blocks        | K-2015.06-DWBB_201506.5.2
                                                               |     *     |
============================================================================


Information: There are 1 potential problems in your design. Please run 'check_design' for more information. (LINT-99)



  Beginning Pass 1 Mapping
  ------------------------
  Processing 'reg_file'
Information: Added key list 'DesignWare' to design 'reg_file'. (DDB-72)

  Updating timing information
Information: Updating design information... (UID-85)

  Beginning Implementation Selection
  ----------------------------------

  Beginning Mapping Optimizations  (Medium effort)
  -------------------------------

                                  TOTAL                                      
   ELAPSED            WORST NEG   SETUP    DESIGN                            
    TIME      AREA      SLACK     COST    RULE COST         ENDPOINT         
  --------- --------- --------- --------- --------- -------------------------
    0:00:11   59096.1      0.00       0.0      13.8                          
    0:00:11   59096.1      0.00       0.0      13.8                          
    0:00:11   59096.1      0.00       0.0      13.8                          
    0:00:11   59096.1      0.00       0.0      13.8                          
    0:00:11   59096.1      0.00       0.0      13.8                          
    0:00:12   55586.7      0.00       0.0      12.5                          
    0:00:12   55586.7      0.00       0.0      12.5                          
    0:00:12   55586.7      0.00       0.0      12.5                          
    0:00:12   55586.7      0.00       0.0      12.5                          
    0:00:12   55586.7      0.00       0.0      12.5                          
    0:00:14   56761.4      0.00       0.0      10.9                          
    0:00:17   57810.7      0.00       0.0       9.5                          
    0:00:19   58324.1      0.00       0.0       8.8                          
    0:00:21   58824.9      0.00       0.0       8.1                          
    0:00:21   59319.0      0.00       0.0       7.5                          
    0:00:22   59787.4      0.00       0.0       6.9                          
    0:00:23   60240.3      0.00       0.0       6.3                          
    0:00:24   60669.7      0.00       0.0       5.7                          
    0:00:24   61075.2      0.00       0.0       5.2                          
    0:00:25   61434.7      0.00       0.0       4.7                          
    0:00:25   61728.9      0.00       0.0       4.3                          
    0:00:26   61999.2      0.00       0.0       4.0                          
    0:00:26   62217.9      0.00       0.0       3.7                          
    0:00:26   62409.9      0.00       0.0       3.4                          
    0:00:26   62563.8      0.00       0.0       3.2                          
    0:00:27   62663.3      0.00       0.0       3.1                          
    0:00:27   62663.3      0.00       0.0       3.1                          



  Beginning Delay Optimization Phase
  ----------------------------------

                                  TOTAL                                      
   ELAPSED            WORST NEG   SETUP    DESIGN                            
    TIME      AREA      SLACK     COST    RULE COST         ENDPOINT         
  --------- --------- --------- --------- --------- -------------------------
    0:00:27   62663.3      0.00       0.0       3.1                          
    0:00:27   62663.3      0.00       0.0       3.1                          
    0:00:27   62646.9      0.00       0.0       3.3                          


  Beginning Design Rule Fixing  (max_capacitance)
  ----------------------------

                                  TOTAL                                      
   ELAPSED            WORST NEG   SETUP    DESIGN                            
    TIME      AREA      SLACK     COST    RULE COST         ENDPOINT         
  --------- --------- --------- --------- --------- -------------------------
    0:00:27   62646.9      0.00       0.0       3.3                          
    0:00:27   62797.0      0.00       0.0       3.0 alt97/net48743           
    0:00:27   62951.4      0.00       0.0       2.9 alt172/net53246          
    0:00:27   63107.7      0.00       0.0       2.8 alt178/net61603          
    0:00:27   63282.8      0.00       0.0       2.6 N1358                    
    0:00:27   63476.6      0.00       0.0       2.5 N1397                    
    0:00:27   63660.5      0.00       0.0       2.4 N1145                    
    0:00:27   63787.3      0.00       0.0       2.4 N533                     
    0:00:27   63988.1      0.00       0.0       2.3 N1092                    
    0:00:27   64174.9      0.00       0.0       2.2 N990                     
    0:00:28   64324.6      0.00       0.0       2.1 alt97/net49166           
    0:00:28   64464.0      0.00       0.0       2.1 alt97/net49173           
    0:00:28   64661.1      0.00       0.0       2.0 n2822                    
    0:00:28   64858.2      0.00       0.0       2.0 alt97/net49332           
    0:00:28   65055.3      0.00       0.0       1.9 alt97/net49398           
    0:00:28   65252.4      0.00       0.0       1.8 alt97/net49449           
    0:00:29   65412.4      0.00       0.0       1.8 alt97/net48674           
    0:00:29   65557.0      0.00       0.0       1.7 alt97/net48832           
    0:00:29   65701.5      0.00       0.0       1.7 alt97/net48977           
    0:00:29   65846.1      0.00       0.0       1.7 alt97/net49288           
    0:00:29   66021.6      0.00       0.0       1.7 n1166                    
    0:00:29   66204.6      0.00       0.0       1.6 n1870                    
    0:00:29   66387.6      0.00       0.0       1.5 n2630                    
    0:00:29   66527.0      0.00       0.0       1.5 alt97/net48987           
    0:00:29   66666.4      0.00       0.0       1.5 alt178/net62882          
    0:00:29   66804.9      0.00       0.0       1.5 N609                     
    0:00:29   66970.0      0.00       0.0       1.4 alt97/net48650           
    0:00:29   67109.4      0.00       0.0       1.4 alt97/net48874           
    0:00:30   67248.8      0.00       0.0       1.4 alt172/net52853          
    0:00:30   67388.2      0.00       0.0       1.4 alt178/net61621          
    0:00:30   67527.6      0.00       0.0       1.4 alt178/net63091          
    0:00:39   67590.9      0.00       0.0       1.4                          


  Beginning Area-Recovery Phase  (cleanup)
  -----------------------------

                                  TOTAL                                      
   ELAPSED            WORST NEG   SETUP    DESIGN                            
    TIME      AREA      SLACK     COST    RULE COST         ENDPOINT         
  --------- --------- --------- --------- --------- -------------------------
    0:00:39   67590.9      0.00       0.0       1.4                          
    0:00:39   67590.9      0.00       0.0       1.4                          
    0:00:40   65343.5      0.00       0.0       1.4                          
    0:00:41   64458.4      0.00       0.0       1.4                          
    0:00:41   63975.4      0.00       0.0       1.4                          
    0:00:42   63764.3      0.00       0.0       1.4                          
    0:00:42   63668.5      0.00       0.0       1.4                          
    0:00:42   63591.1      0.00       0.0       1.4                          
    0:00:43   63517.9      0.00       0.0       1.4                          
    0:00:43   63440.4      0.00       0.0       1.4                          
    0:00:43   63382.7      0.00       0.0       1.4                          
    0:00:44   63336.3      0.00       0.0       1.4                          
    0:00:44   63288.4      0.00       0.0       1.4                          
    0:00:44   63243.3      0.00       0.0       1.4                          
    0:00:45   63202.5      0.00       0.0       1.4                          
    0:00:45   63160.3      0.00       0.0       1.4                          
    0:00:45   63119.4      0.00       0.0       1.4                          
    0:00:46   63078.6      0.00       0.0       1.4                          
    0:00:46   63078.6      0.00       0.0       1.4                          
    0:00:46   63078.6      0.00       0.0       1.4                          
    0:00:46   62911.1      0.00       0.0       1.4                          
    0:00:46   62911.1      0.00       0.0       1.4                          
    0:00:46   62911.1      0.00       0.0       1.4                          
    0:00:46   62911.1      0.00       0.0       1.4                          
    0:00:46   62911.1      0.00       0.0       1.4                          
    0:00:46   62911.1      0.00       0.0       1.4                          
    0:00:46   62911.1      0.00       0.0       1.4                          
Loading db file '/home/scf-22/ee577/NCSU45PDK/FreePDK45/osu_soc/lib/files/gscl45nm.db'


Note: Symbol # after min delay cost means estimated hold TNS across all active scenarios 


  Optimization Complete
  ---------------------
Warning: Design 'reg_file' contains 1 high-fanout nets. A fanout number of 1000 will be used for delay calculations involving these nets. (TIM-134)
     Net 'clk': 2048 load(s), 1 driver(s)
1
# For better synthesis result, use "compile_ultra" command.
# compile_ultra is doing automatic ungrouping during optimization,
# therefore sometimes it's hard to figure out the critical path 
# from the synthesized netlist.
# So, use "compile" command for now.
# Writing the synthesis result into Synopsys db format.
# You can read the saved db file into DesignCompiler later using
# "read_db" command for further analysis (timing, area...).
#write -xg_force_db -format db -hierarchy -out db/$design_name.db ;
# Generating timing and are report of the synthezied design.
report_timing > report/$design_name.timing ;
report_area > report/$design_name.area ;
report_power > report/$design_name.power
# Writing synthesized gate-level verilog netlist.
# This verilog netlist will be used for post-synthesis gate-level simulation.
change_names -rules verilog -hierarchy ;
1
write -format verilog -hierarchy -out netlist/${design_name}_syn.v ;
Writing verilog file '/home/viterbi/08/rushikes/ee577b/project/proj-phase2/RF/netlist/reg_file_syn.v'.
1
# Writing Standard Delay Format (SDF) back-annotation file.
# This delay information can be used for post-synthesis simulation.
write_sdf netlist/${design_name}_syn.sdf;
Information: Annotated 'cell' delays are assumed to include load delay. (UID-282)
Information: Writing timing information to file '/home/viterbi/08/rushikes/ee577b/project/proj-phase2/RF/netlist/reg_file_syn.sdf'. (WT-3)
1
write_sdc netlist/${design_name}_syn.sdc
1
1
dc_shell> 
dc_shell> quir
Error: unknown command 'quir' (CMD-005)
dc_shell> quit

Thank you...

